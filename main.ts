enum ActionKind {
    RunningLeft,
    RunningRight,
    Idle,
    IdleLeft,
    IdleRight,
    JumpingLeft,
    JumpingRight,
    CrouchLeft,
    CrouchRight,
    Flying,
    Walking,
    Jumping
}
namespace SpriteKind {
    export const Bumper = SpriteKind.create()
    export const Goal = SpriteKind.create()
    export const Coin = SpriteKind.create()
    export const Flier = SpriteKind.create()
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Bumper, function (sprite, otherSprite) {
    if (sprite.vy > 0 && !(sprite.isHittingTile(CollisionDirection.Bottom)) || sprite.y < otherSprite.top) {
        otherSprite.destroy(effects.ashes, 250)
        otherSprite.vy = -50
        sprite.vy = -2 * pixelsToMeters
        info.changeScoreBy(1)
        music.powerUp.play()
    } else {
        info.changeLifeBy(-1)
        sprite.say("Ow!", invincibilityPeriod)
        music.powerDown.play()
    }
    pause(invincibilityPeriod)
})
function initializeAnimations () {
    initializeHeroAnimations()
    initializeCoinAnimation()
    initializeFlierAnimations()
}
function giveIntroduction () {
    game.setDialogFrame(img`
        . 2 2 2 2 2 2 2 2 2 2 2 2 2 . . 
        2 2 1 1 1 1 1 1 1 1 1 1 1 2 2 . 
        2 1 1 2 2 2 2 2 2 2 2 2 1 1 2 . 
        2 1 2 2 1 1 1 1 1 1 1 2 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 2 1 1 1 1 1 1 1 2 2 1 2 . 
        2 1 1 2 2 2 2 2 2 2 2 2 1 1 2 . 
        2 2 1 1 1 1 1 1 1 1 1 1 1 2 2 . 
        . 2 2 2 2 2 2 2 2 2 2 2 2 2 . . 
        . . . . . . . . . . . . . . . . 
        `)
    game.setDialogCursor(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . f f 5 5 5 5 f f . . . . 
        . . . . f 5 5 5 5 5 5 f . . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . . f 5 5 5 5 5 5 f . . . . 
        . . . . f f 5 5 5 5 f f . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    showInstruction("Move with the left and right buttons.")
    showInstruction("Jump with the up or A button.")
    showInstruction("Double jump by pressing jump again.")
}
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    attemptJump()
})
function initializeCoinAnimation () {
    coinAnimation = animation.createAnimation(ActionKind.Idle, 200)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . f f 5 5 5 5 f f . . . . 
        . . . . f 5 5 5 5 5 5 f . . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . . f 5 5 5 5 5 5 f . . . . 
        . . . . f f 5 5 5 5 f f . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . f f f f f f . . . . . . 
        . . . f f 5 f 5 5 5 f . . . . . 
        . . . f 5 f 5 5 5 5 5 f . . . . 
        . . f 5 f 5 5 5 4 5 5 f . . . . 
        . . f 5 f 5 5 5 4 4 5 5 f . . . 
        . . f 5 f 5 5 5 4 4 5 5 f . . . 
        . . f 5 f 5 5 5 4 5 5 f . . . . 
        . . . f 5 f 5 5 5 5 5 f . . . . 
        . . . . f 5 f 5 5 5 f . . . . . 
        . . . . f f f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f f . . . . . . 
        . . . . f f 5 f 5 f f . . . . . 
        . . . f f 5 f 5 5 5 f . . . . . 
        . . . f 5 f 5 5 5 5 f f . . . . 
        . . . f 5 f 5 5 4 5 5 f . . . . 
        . . . f 5 f 5 5 4 5 5 f . . . . 
        . . . f 5 f 5 5 5 5 f f . . . . 
        . . . f f 5 f 5 5 5 f . . . . . 
        . . . . f f 5 f 5 f f . . . . . 
        . . . . . f f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . f f f f f . . . . . . 
        . . . . . f 5 f 5 f f . . . . . 
        . . . . . f 5 f 5 5 f . . . . . 
        . . . . . f 5 f 5 5 f . . . . . 
        . . . . . f 5 f 5 5 f . . . . . 
        . . . . . f 5 f 5 5 f . . . . . 
        . . . . . f 5 f 5 f f . . . . . 
        . . . . . f f f f f . . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . f f f f f . . . . . 
        . . . . . f f 5 f 5 f . . . . . 
        . . . . . f 5 5 f 5 f . . . . . 
        . . . . . f 5 5 f 5 f . . . . . 
        . . . . . f 5 5 f 5 f . . . . . 
        . . . . . f 5 5 f 5 f . . . . . 
        . . . . . f f 5 f 5 f . . . . . 
        . . . . . . f f f f f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f f . . . . . 
        . . . . . f f 5 f 5 f f . . . . 
        . . . . . f 5 5 5 f 5 f f . . . 
        . . . . f f 5 5 5 5 f 5 f . . . 
        . . . . f 5 5 4 5 5 f 5 f . . . 
        . . . . f 5 5 4 5 5 f 5 f . . . 
        . . . . f f 5 5 5 5 f 5 f . . . 
        . . . . . f 5 5 5 f 5 f f . . . 
        . . . . . f f 5 f 5 f f . . . . 
        . . . . . . f f f f f . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f f f . . . . 
        . . . . . f 5 5 5 f 5 f f . . . 
        . . . . f 5 5 5 5 5 f 5 f . . . 
        . . . . f 5 5 4 5 5 5 f 5 f . . 
        . . . f 5 5 4 4 5 5 5 f 5 f . . 
        . . . f 5 5 4 4 5 5 5 f 5 f . . 
        . . . . f 5 5 4 5 5 5 f 5 f . . 
        . . . . f 5 5 5 5 5 f 5 f . . . 
        . . . . . f 5 5 5 f 5 f . . . . 
        . . . . . . f f f f f f . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Coin, function (sprite, otherSprite) {
    otherSprite.destroy(effects.trail, 250)
    otherSprite.y += -3
    info.changeScoreBy(3)
    music.baDing.play()
})
function attemptJump () {
    // else if: either fell off a ledge, or double jumping
    if (hero.isHittingTile(CollisionDirection.Bottom)) {
        hero.vy = -4 * pixelsToMeters
    } else if (canDoubleJump) {
        doubleJumpSpeed = -3 * pixelsToMeters
        // Good double jump
        if (hero.vy >= -40) {
            doubleJumpSpeed = -4.5 * pixelsToMeters
            hero.startEffect(effects.trail, 500)
            scene.cameraShake(2, 250)
        }
        hero.vy = doubleJumpSpeed
        canDoubleJump = false
    }
}
function animateIdle () {
    mainIdleLeft = animation.createAnimation(ActionKind.IdleLeft, 100)
    animation.attachAnimation(hero, mainIdleLeft)
    mainIdleLeft.addAnimationFrame(img`
        ............................................................
        ............................................................
        ............................................................
        ............................................................
        ..........................................eeeeee............
        ........................................eefeeeeee...........
        ........................................111eeeeeee..........
        ........................................966eeeeeeee.........
        ....................................ffff111eeeeeeeeee.......
        ..................................fffeeeeeeffffeeeeeee......
        .................................ffeeeeeeeeeeeefffeeeeee....
        .................................feeeeeeeeeeeeeeeefeeeee....
        .................................feeeeededdfeeeeeefeeeeee...
        .................................ffeedddffdddfeeeefeeeeeeee.
        .................................ffeddddddddddfeeee..eeeeee.
        ..................................fedfffdfffddfeee..eeeeee..
        ..................................fed961d9661dfeee.eeee.....
        ..................................fed1f1d1f61dfe...eeee.....
        ..................................11dff1dff61d11...eeeee....
        ..................................96dddddddddd96.....eee....
        ..................................11dddddddddd11.....eee....
        ..................................fedd3dddedddfe............
        .................................feedd3dddeddfee............
        .................................fe.fdd3eedddfe.............
        .................................fe..fddddddd.fe............
        ..................................fe..fffdddd.f.............
        ........................................ddddd...............
        .......................................6dddd16ddd...........
        ......................................6dddd666fdd...........
        ......................................fff66666fdd...........
        .....................................ff9966166fdd...........
        .....................................f966616666dd...........
        .....................................f966696666dd...........
        .....................................f966669996d8...........
        .....................................ff9666666688...........
        .....................................df9666666688...........
        .....................................8f9666666688...........
        .....................................8f9666666688...........
        ....................................ddf9666611188...........
        .....................................f111feddd1dd...........
        .....................................1dddfeeed111...........
        ....................................1ddeefeeeedd11..........
        ....................................1dee8feeeeddd11.........
        ...................................1dde88ffeeeeddd1.........
        ...................................1dee8f8feeeeedd1.........
        ...................................1de88f8feeeeedd1.........
        ...................................1de88f8ffeeeeed11........
        ...................................1df88f88fffeeedd1........
        ....................................f8888f888ffeeed1........
        ....................................f888f88888feeed1........
        ....................................f888f88888ffeed1........
        ....................................f888f888888ffedd........
        ....................................f888ff88888f............
        ....................................f88888f8888f............
        ....................................ff8feefeeeff............
        .......................................feefeee..............
        .......................................feefeee..............
        .......................................feefeee..............
        .......................................feefeee..............
        ......................................feefeeee..............
        `)
    mainIdleRight = animation.createAnimation(ActionKind.IdleRight, 100)
    animation.attachAnimation(hero, mainIdleRight)
    mainIdleRight.addAnimationFrame(img`
        ............................................................
        ............................................................
        ............................................................
        .....................eeeeee.................................
        ....................eeeeeefee...............................
        ...................eeeeeee111...............................
        ..................eeeeeeee669...............................
        ................eeeeeeeeee111ffff...........................
        ...............eeeeeeeffffeeeeeefff.........................
        .............eeeeeefffeeeeeeeeeeeeff........................
        .............eeeeefeeeeeeeeeeeeeeeef........................
        ............eeeeeefeeeeeefddedeeeeef........................
        ..........eeeeeeeefeeeefdddffdddeeff........................
        ..........eeeeee..eeeefddddddddddeff........................
        ...........eeeeee..eeefddfffdfffdef.........................
        ..............eeee.eeefd1669d169def.........................
        ..............eeee...efd16f1d1f1def.........................
        .............eeeee...11d16ffd1ffd11.........................
        .............eee.....69dddddddddd69.........................
        .............eee.....11dddddddddd11.........................
        .....................efdddeddd3ddef.........................
        .....................eefddeddd3ddeef........................
        ......................efdddee3ddf.ef........................
        .....................ef.dddddddf..ef........................
        ......................f.ddddfff..ef.........................
        ........................ddddd...............................
        ....................ddd61dddd6..............................
        ....................ddf666dddd6.............................
        ....................ddf66666fff.............................
        ....................ddf6616699ff............................
        ....................dd666616669f............................
        ....................dd666696669f............................
        ....................8d699966669f............................
        ....................8866666669ff............................
        ....................8866666669fd............................
        ....................8866666669f8............................
        ....................8866666669f8............................
        ....................8811166669fdd...........................
        ....................dd1dddef111f............................
        ....................111deeefddd1............................
        ...................11ddeeeefeedd1...........................
        ..................11dddeeeef8eed1...........................
        ..................1dddeeeeff88edd1..........................
        ..................1ddeeeeef8f8eed1..........................
        ..................1ddeeeeef8f88ed1..........................
        .................11deeeeeff8f88ed1..........................
        .................1ddeeefff88f88fd1..........................
        .................1deeeff888f8888f...........................
        .................1deeef88888f888f...........................
        .................1deeff88888f888f...........................
        .................ddeff888888f888f...........................
        .....................f88888ff888f...........................
        .....................f8888f88888f...........................
        .....................ffeeefeef8ff...........................
        .......................eeefeef..............................
        .......................eeefeef..............................
        .......................eeefeef..............................
        .......................eeefeef..............................
        .......................eeeefeef.............................
        ............................................................
        `)
}
function setLevelTileMap (level: number) {
    clearGame()
    if (level == 0) {
        tiles.setTilemap(tilemap`level`)
    } else if (level == 1) {
        tiles.setTilemap(tilemap`level_0`)
    } else if (level == 2) {
        tiles.setTilemap(tilemap`level_1`)
    } else if (level == 3) {
        tiles.setTilemap(tilemap`level_2`)
    } else if (level == 4) {
        tiles.setTilemap(tilemap`level_3`)
    } else if (level == 5) {
        tiles.setTilemap(tilemap`level_4`)
    } else if (level == 6) {
        tiles.setTilemap(tilemap`level_5`)
    } else if (level == 7) {
        tiles.setTilemap(tilemap`level_6`)
    }
    initializeLevel(level)
}
function initializeFlierAnimations () {
    flierFlying = animation.createAnimation(ActionKind.Flying, 100)
    flierFlying.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f f f f . . . . 
        . . . . f 4 4 4 4 4 4 4 f . . . 
        . . . f 4 5 5 4 4 4 5 5 4 f . . 
        . f . f 4 4 4 5 4 5 4 4 4 f . f 
        . f f 4 4 4 4 4 4 4 4 4 4 4 f f 
        . f 4 4 4 4 4 5 4 5 4 4 4 4 4 f 
        . f 4 4 4 4 4 5 4 5 4 4 4 4 4 f 
        . f f 4 4 4 4 4 4 4 4 4 4 4 f f 
        . . . f 4 4 5 5 5 5 5 4 4 f . . 
        . . . . f 4 5 4 4 4 5 4 f . . . 
        . . . . . f f f f f f f . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    flierFlying.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f f f f . . . . 
        . . . . f 4 4 4 4 4 4 4 f . . . 
        . . . f 4 5 5 4 4 4 5 5 4 f . . 
        . . . f 4 4 4 5 4 5 4 4 4 f . . 
        . . f 4 4 4 4 4 4 4 4 4 4 4 f . 
        . . f 4 4 4 4 5 4 5 4 4 4 4 f . 
        . f 4 4 4 4 4 5 4 5 4 4 4 4 4 f 
        . f 4 4 4 4 4 4 4 4 4 4 4 4 4 f 
        . f 4 f 4 4 5 5 5 5 5 4 4 f 4 f 
        . f f . f 4 5 4 4 4 5 4 f . f f 
        . f . . . f f f f f f f . . . f 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    flierFlying.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f f f f . . . . 
        . . . . f 4 4 4 4 4 4 4 f . . . 
        . . . f 4 5 5 4 4 4 5 5 4 f . . 
        . f . f 4 4 4 5 4 5 4 4 4 f . f 
        . f f 4 4 4 4 4 4 4 4 4 4 4 f f 
        . f 4 4 4 4 4 5 4 5 4 4 4 4 4 f 
        . f 4 4 4 4 4 5 4 5 4 4 4 4 4 f 
        . f f 4 4 4 4 4 4 4 4 4 4 4 f f 
        . . . f 4 4 5 5 5 5 5 4 4 f . . 
        . . . . f 4 5 4 4 4 5 4 f . . . 
        . . . . . f f f f f f f . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    flierIdle = animation.createAnimation(ActionKind.Idle, 100)
    flierIdle.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f f f f . . . . 
        . . . . f 4 4 4 4 4 4 4 f . . . 
        . . . f 4 5 5 4 4 4 5 5 4 f . . 
        . f . f 4 4 4 5 4 5 4 4 4 f . f 
        . f f 4 4 4 4 4 4 4 4 4 4 4 f f 
        . f 4 4 4 4 4 5 4 5 4 4 4 4 4 f 
        . f 4 4 4 4 4 5 4 5 4 4 4 4 4 f 
        . f f 4 4 4 4 4 4 4 4 4 4 4 f f 
        . . . f 4 4 5 5 5 5 5 4 4 f . . 
        . . . . f 4 5 4 4 4 5 4 f . . . 
        . . . . . f f f f f f f . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    attemptJump()
})
function animateRun () {
    mainRunLeft = animation.createAnimation(ActionKind.RunningLeft, 100)
    animation.attachAnimation(hero, mainRunLeft)
    mainRunLeft.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . f f f f f f f . . . . . . 
        . . f e e e e e e e f . . . . . 
        . f e e e e e e e e e f . . . . 
        . f d d d d e d d e e f . . . . 
        . f d d f d d e d e e f . . . . 
        . f d d f d d d e e e f . . . . 
        . f d d f d d d d d d f . . . . 
        . f d d d d d d d d d f . . . . 
        . . f c c c a a c c b f . . . . 
        . . f c c d d d c c b f . . . . 
        . . f b f f d d f f f f . . . . 
        . . f a a a a a a a b f . . . . 
        . . . f a a a a b f f . . . . . 
        . . . f a a a a b f . . . . . . 
        . . . . f f f f f . . . . . . . 
        `)
    mainRunLeft.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . f f f f f f f . . . . . . 
        . . f e e e e e e e f . . . . . 
        . f e e e e e e e e e f . . . . 
        . f d d d d e d d e e f . . . . 
        . f d d f d d e d e e f . . . . 
        . f d d f d d d e e e f . . . . 
        . f d d f d d d d d d f . . . . 
        . f d d d d d d d d d f . . . . 
        . . f c c c c a a c b f . . . . 
        . . f c c c c d d c b f . . . . 
        . . f b f f d d d f f f f . . . 
        . . f a a a a a a a a b f f . . 
        . . . f a a b f f a a a f f . . 
        . . . . f f f . f f f f f . . . 
        `)
    mainRunLeft.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . f f f f f f f . . . . . . 
        . . f e e e e e e e f . . . . . 
        . f e e e e e e e e e f . . . . 
        . f d d d d e d d e e f . . . . 
        . f d d f d d e d e e f . . . . 
        . f d d f d d d e e e f . . . . 
        . f d d f d d d d d d f . . . . 
        . f d d d d d d d d d f . . . . 
        . . f c c c a a c c b f . . . . 
        . . f c c d d d c c b f . . . . 
        . . f b f f d d f f f f . . . . 
        . . f a a a a a a a b f . . . . 
        . . . f a a a a b f f . . . . . 
        . . . f a a a a b f . . . . . . 
        . . . . f f f f f . . . . . . . 
        `)
    mainRunLeft.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . f f f f f f f . . . . . . 
        . . f e e e e e e e f . . . . . 
        . f e e e e e e e e e f . . . . 
        . f d d d d e d d e e f . . . . 
        . f d d f d d e d e e f . . . . 
        . f d d f d d d e e e f . . . . 
        . f d d f d d d d d d f . . . . 
        . f d d d d d d d d d f . . . . 
        . . f c a a c c c c b f . . . . 
        . f d d d b c c c c b f . . . . 
        f f f d d f f f f f f f . . . . 
        f f f a a a a a a a b f . . . . 
        . f a a b f a a b f f . . . . . 
        . f f f f . f f f . . . . . . . 
        `)
    mainRunRight = animation.createAnimation(ActionKind.RunningRight, 100)
    animation.attachAnimation(hero, mainRunRight)
    mainRunRight.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f f f f . . . 
        . . . . . f e e e e e e e f . . 
        . . . . f e e e e e e e e e f . 
        . . . . f e e d d e d d d d f . 
        . . . . f e e d e d d f d d f . 
        . . . . f e e e d d d f d d f . 
        . . . . f d d d d d d f d d f . 
        . . . . f d d d d d d d d d f . 
        . . . . f b c c a a c c c f . . 
        . . . . f b c c d d d c c f . . 
        . . . . f f f f d d f f b f . . 
        . . . . f b a a a a a a a f . . 
        . . . . . f f b a a a a f . . . 
        . . . . . . f b a a a a f . . . 
        . . . . . . . f f f f f . . . . 
        `)
    mainRunRight.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f f f f . . . 
        . . . . . f e e e e e e e f . . 
        . . . . f e e e e e e e e e f . 
        . . . . f e e d d e d d d d f . 
        . . . . f e e d e d d f d d f . 
        . . . . f e e e d d d f d d f . 
        . . . . f d d d d d d f d d f . 
        . . . . f d d d d d d d d d f . 
        . . . . f b c a a c c c c f . . 
        . . . . f b c d d c c c c f . . 
        . . . f f f f d d d f f b f . . 
        . . f f b a a a a a a a a f . . 
        . . f f a a a f f b a a f . . . 
        . . . f f f f . . f f f . . . . 
        `)
    mainRunRight.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f f f f . . . 
        . . . . . f e e e e e e e f . . 
        . . . . f e e e e e e e e e f . 
        . . . . f e e d d e d d d d f . 
        . . . . f e e d e d d f d d f . 
        . . . . f e e e d d d f d d f . 
        . . . . f d d d d d d f d d f . 
        . . . . f d d d d d d d d d f . 
        . . . . f b c c a a c c c f . . 
        . . . . f b c c d d d c c f . . 
        . . . . f f f f d d f f b f . . 
        . . . . f b a a a a a a a f . . 
        . . . . . f f b a a a a f . . . 
        . . . . . . f b a a a a f . . . 
        . . . . . . . f f f f f . . . . 
        `)
    mainRunRight.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f f f f . . . 
        . . . . . f e e e e e e e f . . 
        . . . . f e e e e e e e e e f . 
        . . . . f e e d d e d d d d f . 
        . . . . f e e d e d d f d d f . 
        . . . . f e e e d d d f d d f . 
        . . . . f d d d d d d f d d f . 
        . . . . f d d d d d d d d d f . 
        . . . . f b c c c c a a c f . . 
        . . . . f b c c c c b d d d f . 
        . . . . f f f f f f f d d f f f 
        . . . . f b a a a a a a a f f f 
        . . . . . f f b a a f b a a f . 
        . . . . . . . f f f . f f f . . 
        `)
}
function animateJumps () {
    // Because there isn't currently an easy way to say "play this animation a single time
    // and stop at the end", this just adds a bunch of the same frame at the end to accomplish
    // the same behavior
    mainJumpLeft = animation.createAnimation(ActionKind.JumpingLeft, 100)
    animation.attachAnimation(hero, mainJumpLeft)
    mainJumpLeft.addAnimationFrame(img`
        ............................................................
        ...........eeeeee...........................................
        .........eefeeeeee..........................................
        .........111eeeeeee.........................................
        .........966eeeeeeee........................................
        .....ffff111eeeeeeeeee......................................
        ...fffeeeeeeffffeeeeeee.....................................
        ..ffeeeeeeeeeeeefffeeeeee...................................
        ..feeeeeeeeeeeeeeeefeeeee...................................
        ..feeeeededdfeeeeeefeeeeee..................................
        ..ffeedddffdddfeeeefeeeeeeee................................
        ..ffeddddddddddfeeee..eeeeee................................
        ...fedfffdfffddfeee..eeeeee.................................
        ...fed961d9661dfeee.eeee....................................
        ...fed1f1d1f61dfe...eeee....................................
        ...11dff1dff61d11...eeeee...................................
        ...96dddddddddd96.....eee...................................
        ...11dddddddddd11.....eee...................................
        ...fedd3dddedddfe...........................................
        ..feedd3dddeddfee...........................................
        ..fe.fdd3eedddfe............................................
        ..fe..fddddddd.fe...........................................
        ...fe..fffdddd.f............................................
        .........ddddd..............................................
        ........6dddd16ddd..........................................
        .......6dddd666fdd..........................................
        .......fff66666fdd..........................................
        ......ff9966166fdd..........................................
        ......f966616666dd..........................................
        ......f966696666dd..........................................
        ......f966669996d8..........................................
        ......ff9666666688..........................................
        ......df9666666688..........................................
        ......8f9666666688..........................................
        ......8f9666666688..........................................
        .....ddf9666611188..........................................
        ......f111feddd1dd..........................................
        ......1dddfeeed111..........................................
        .....1ddeefeeeedd11.........................................
        .....1dee8feeeeddd11........................................
        ....1dde88ffeeeeddd1........................................
        ....1dee8f8feeeeedd1........................................
        ....1de88f8feeeeedd1........................................
        ....1de88f8ffeeeeed11.......................................
        ....1df88f88fffeeedd1.......................................
        .....f8888f888ffeeed1.......................................
        .....f888f88888feeed1.......................................
        .....f888f88888ffeed1.......................................
        .....f888f888888ffedd.......................................
        .....f888ff88888f...........................................
        .....f88888f8888f...........................................
        .....ff8feefeeeff...........................................
        ........feefeee.............................................
        ........feefeee.............................................
        ........feefeee.............................................
        ........feefeee.............................................
        .......feefeeee.............................................
        ............................................................
        ............................................................
        ............................................................
        `)
    mainJumpLeft.addAnimationFrame(img`
        ............................................................
        ...........eeeeee...........................................
        .........eefeeeeee..........................................
        .........111eeeeeee.........................................
        .........966eeeeeeee........................................
        .....ffff111eeeeeeeeee......................................
        ...fffeeeeeeffffeeeeeee.....................................
        ..ffeeeeeeeeeeeefffeeeeee...................................
        ..feeeeeeeeeeeeeeeefeeeee...................................
        ..feeeeededdfeeeeeefeeeeee..................................
        ..ffeedddffdddfeeeefeeeeeeee................................
        ..ffeddddddddddfeeee..eeeeee................................
        ...fedfffdfffddfeee..eeeeee.................................
        ...fed961d9661dfeee.eeee....................................
        ...fed1f1d1f61dfe...eeee....................................
        ...11dff1dff61d11...eeeee...................................
        ...96dddddddddd96.....eee...................................
        ...11dddddddddd11.....eee...................................
        ...fedd3dddedddfe...........................................
        ..feedd3dddeddfee...........................................
        ..fe.fdd3eedddfe............................................
        ..fe..fddddddd.fe...........................................
        ...fe..fffdddd.f............................................
        .........ddddd..............................................
        ........6dddd16ddd..........................................
        .......6dddd666fdd..........................................
        .......fff66666fdd..........................................
        ......ff9966166fdd..........................................
        ......f966616666dd..........................................
        ......f966696666dd..........................................
        ......f966669996d8..........................................
        ......ff9666666688..........................................
        ......df9666666688..........................................
        ......8f9666666688..........................................
        ......8f9666666688..........................................
        .....ddf9666611188..........................................
        ......f111feddd1dd..........................................
        ......1dddfeeed111..........................................
        .....1ddeefeeeedd11.........................................
        .....1dee8feeeeddd11........................................
        ....1dde88ffeeeeddd1........................................
        ....1dee8f8feeeeedd1........................................
        ....1de88f8feeeeedd1........................................
        ....1de88f8ffeeeeed11.......................................
        ....1df88f88fffeeedd1.......................................
        .....f8888f888ffeeed1.......................................
        .....f888f88888feeed1.......................................
        .....f888f88888ffeed1.......................................
        .....f888f888888ffedd.......................................
        .....f888ff88888f...........................................
        .....f88888f8888f...........................................
        .....ff8feefeeeff...........................................
        ........feefeee.............................................
        ........feefeee.............................................
        ........feefeee.............................................
        ........feefeee.............................................
        .......feefeeee.............................................
        ............................................................
        ............................................................
        ............................................................
        `)
    for (let index = 0; index < 30; index++) {
        mainJumpLeft.addAnimationFrame(img`
            ............................................................
            ...........eeeeee...........................................
            .........eefeeeeee..........................................
            .........111eeeeeee.........................................
            .........966eeeeeeee........................................
            .....ffff111eeeeeeeeee......................................
            ...fffeeeeeeffffeeeeeee.....................................
            ..ffeeeeeeeeeeeefffeeeeee...................................
            ..feeeeeeeeeeeeeeeefeeeee...................................
            ..feeeeededdfeeeeeefeeeeee..................................
            ..ffeedddffdddfeeeefeeeeeeee................................
            ..ffeddddddddddfeeee..eeeeee................................
            ...fedfffdfffddfeee..eeeeee.................................
            ...fed961d9661dfeee.eeee....................................
            ...fed1f1d1f61dfe...eeee....................................
            ...11dff1dff61d11...eeeee...................................
            ...96dddddddddd96.....eee...................................
            ...11dddddddddd11.....eee...................................
            ...fedd3dddedddfe...........................................
            ..feedd3dddeddfee...........................................
            ..fe.fdd3eedddfe............................................
            ..fe..fddddddd.fe...........................................
            ...fe..fffdddd.f............................................
            .........ddddd..............................................
            ........6dddd16ddd..........................................
            .......6dddd666fdd..........................................
            .......fff66666fdd..........................................
            ......ff9966166fdd..........................................
            ......f966616666dd..........................................
            ......f966696666dd..........................................
            ......f966669996d8..........................................
            ......ff9666666688..........................................
            .......f9666666688..........................................
            .......f9666666688..........................................
            .......f9666666688............................3.............
            .......f9666611188..........................................
            .......111feddd1dd..........................................
            ......1dddfeeed111..........................................
            .....1ddeefeeeedd11.........................................
            .....1dee8feeeeddd11........................................
            ....1dde88ffeeeeddd1........................................
            ....1dee8f8feeeeedd1ff.ff...................................
            ....1de88f8feeeeedd1eeeef...................................
            ....1de88f8ffeeeeed11eeeef..................................
            ....1df88f88fffeeedd1feeef..................................
            .....f8888f888ffeeedfefeef..................................
            .....f888f88888feeedfefeef..................................
            .....f888f88888ffeedfeeff...................................
            .....f888f8888888fedffeef...................................
            .....f8888fffffff..fffeef...................................
            ......ffff...........fff....................................
            ............................................................
            ............................................................
            ............................................................
            ............................................................
            ............................................................
            ............................................................
            ............................................................
            ............................................................
            ............................................................
            `)
    }
    mainJumpRight = animation.createAnimation(ActionKind.JumpingRight, 100)
    animation.attachAnimation(hero, mainJumpRight)
    mainJumpRight.addAnimationFrame(img`
        ............................................................
        ...........eeeeee...........................................
        ..........eeeeeefee.........................................
        .........eeeeeee111.........................................
        ........eeeeeeee669.........................................
        ......eeeeeeeeee111ffff.....................................
        .....eeeeeeeffffeeeeeefff...................................
        ...eeeeeefffeeeeeeeeeeeeff..................................
        ...eeeeefeeeeeeeeeeeeeeeef..................................
        ..eeeeeefeeeeeefddedeeeeef..................................
        eeeeeeeefeeeefdddffdddeeff..................................
        eeeeee..eeeefddddddddddeff..................................
        .eeeeee..eeefddfffdfffdef...................................
        ....eeee.eeefd1669d169def...................................
        ....eeee...efd16f1d1f1def...................................
        ...eeeee...11d16ffd1ffd11...................................
        ...eee.....69dddddddddd69...................................
        ...eee.....11dddddddddd11...................................
        ...........efdddeddd3ddef...................................
        ...........eefddeddd3ddeef..................................
        ............efdddee3ddf.ef..................................
        ...........ef.dddddddf..ef..................................
        ............f.ddddfff..ef...................................
        ..............ddddd.........................................
        ..........ddd61dddd6........................................
        ..........ddf666dddd6.......................................
        ..........ddf66666fff.......................................
        ..........ddf6616699ff......................................
        ..........dd666616669f......................................
        ..........dd666696669f......................................
        ..........8d699966669f......................................
        ..........8866666669ff......................................
        ..........8866666669fd......................................
        ..........8866666669f8......................................
        ..........8866666669f8......................................
        ..........8811166669fdd.....................................
        ..........dd1dddef111f......................................
        ..........111deeefddd1......................................
        .........11ddeeeefeedd1.....................................
        ........11dddeeeef8eed1.....................................
        ........1dddeeeeff88edd1....................................
        ........1ddeeeeef8f8eed1....................................
        ........1ddeeeeef8f88ed1....................................
        .......11deeeeeff8f88ed1....................................
        .......1ddeeefff88f88fd1....................................
        .......1deeeff888f8888f.....................................
        .......1deeef88888f888f.....................................
        .......1deeff88888f888f.....................................
        .......ddeff888888f888f.....................................
        ...........f88888ff888f.....................................
        ...........f8888f88888f.....................................
        ...........ffeeefeef8ff.....................................
        .............eeefeef........................................
        .............eeefeef........................................
        .............eeefeef........................................
        .............eeefeef........................................
        .............eeeefeef.......................................
        ............................................................
        ............................................................
        ............................................................
        `)
    mainJumpRight.addAnimationFrame(img`
        ............................................................
        ...........eeeeee...........................................
        ..........eeeeeefee.........................................
        .........eeeeeee111.........................................
        ........eeeeeeee669.........................................
        ......eeeeeeeeee111ffff.....................................
        .....eeeeeeeffffeeeeeefff...................................
        ...eeeeeefffeeeeeeeeeeeeff..................................
        ...eeeeefeeeeeeeeeeeeeeeef..................................
        ..eeeeeefeeeeeefddedeeeeef..................................
        eeeeeeeefeeeefdddffdddeeff..................................
        eeeeee..eeeefddddddddddeff..................................
        .eeeeee..eeefddfffdfffdef...................................
        ....eeee.eeefd1669d169def...................................
        ....eeee...efd16f1d1f1def...................................
        ...eeeee...11d16ffd1ffd11...................................
        ...eee.....69dddddddddd69...................................
        ...eee.....11dddddddddd11...................................
        ...........efdddeddd3ddef...................................
        ...........eefddeddd3ddeef..................................
        ............efdddee3ddf.ef..................................
        ...........ef.dddddddf..ef..................................
        ............f.ddddfff..ef...................................
        ..............ddddd.........................................
        ..........ddd61dddd6........................................
        ..........ddf666dddd6.......................................
        ..........ddf66666fff.......................................
        ..........ddf6616699ff......................................
        ..........dd666616669f......................................
        ..........dd666696669f......................................
        ..........8d699966669f......................................
        ..........8866666669ff......................................
        ..........8866666669fd......................................
        ..........8866666669f8......................................
        ..........8866666669f8......................................
        ..........8811166669fdd.....................................
        ..........dd1dddef111f......................................
        ..........111deeefddd1......................................
        .........11ddeeeefeedd1.....................................
        ........11dddeeeef8eed1.....................................
        ........1dddeeeeff88edd1....................................
        ........1ddeeeeef8f8eed1....................................
        ........1ddeeeeef8f88ed1....................................
        .......11deeeeeff8f88ed1....................................
        .......1ddeeefff88f88fd1....................................
        .......1deeeff888f8888f.....................................
        .......1deeef88888f888f.....................................
        .......1deeff88888f888f.....................................
        .......ddeff888888f888f.....................................
        ...........f88888ff888f.....................................
        ...........f8888f88888f.....................................
        ...........ffeeefeef8ff.....................................
        .............eeefeef........................................
        .............eeefeef........................................
        .............eeefeef........................................
        .............eeefeef........................................
        .............eeeefeef.......................................
        ............................................................
        ............................................................
        ............................................................
        `)
    for (let index = 0; index < 30; index++) {
        mainJumpRight.addAnimationFrame(img`
            ............................................................
            ...........eeeeee...........................................
            ..........eeeeeefee.........................................
            .........eeeeeee111.........................................
            ........eeeeeeee669.........................................
            ......eeeeeeeeee111ffff.....................................
            .....eeeeeeeffffeeeeeefff...................................
            ...eeeeeefffeeeeeeeeeeeeff..................................
            ...eeeeefeeeeeeeeeeeeeeeef..................................
            ..eeeeeefeeeeeefddedeeeeef..................................
            eeeeeeeefeeeefdddffdddeeff..................................
            eeeeee..eeeefddddddddddeff..................................
            .eeeeee..eeefddfffdfffdef...................................
            ....eeee.eeefd1669d169def...................................
            ....eeee...efd16f1d1f1def...................................
            ...eeeee...11d16ffd1ffd11...................................
            ...eee.....69dddddddddd69...................................
            ...eee.....11dddddddddd11...................................
            ...........efdddeddd3ddef...................................
            ...........eefddeddd3ddeef..................................
            ............efdddee3ddf.ef..................................
            ...........ef.dddddddf..ef..................................
            ............f.ddddfff..ef...................................
            ..............ddddd.........................................
            ..........ddd61dddd6........................................
            ..........ddf666dddd6.......................................
            ..........ddf66666fff.......................................
            ..........ddf6616699ff......................................
            ..........dd666616669f......................................
            ..........dd666696669f......................................
            ..........8d699966669f......................................
            ..........8866666669ff......................................
            ..........8866666669fd......................................
            ..........8866666669f8......................................
            ..........8866666669f8......................................
            ..........8811166669fdd.....................................
            ..........dd1dddef111f......................................
            ..........111deeefddd1......................................
            .........11ddeeeefeedd1.....................................
            ........11dddeeeef8eed1.....................................
            ........1dddeeeeff88edd1....................................
            ........1ddeeeeef8f8eed1....................................
            ........1ddeeeeef8f88ed1....................................
            .......11deeeeeff8f88ed1....................................
            .......1ddeeefff88f88fd1....................................
            .......1deeeff888f8888f.....................................
            .......1deeef88888f888f.....................................
            .......1deeff88888f888f.....................................
            .......ddeff888888f888f.....................................
            ...........f88888ff888f.....................................
            ...........f8888f88888f.....................................
            ...........ffeeefeef8ff.....................................
            .............eeefeef........................................
            .............eeefeef........................................
            .............eeefeef........................................
            .............eeefeef........................................
            .............eeeefeef.......................................
            ............................................................
            ............................................................
            ............................................................
            `)
    }
}
function animateCrouch () {
    mainCrouchLeft = animation.createAnimation(ActionKind.CrouchLeft, 100)
    animation.attachAnimation(hero, mainCrouchLeft)
    mainCrouchLeft.addAnimationFrame(img`
        ............................................................
        ...........eeeeee...........................................
        .........eefeeeeee..........................................
        .........111eeeeeee.........................................
        .........966eeeeeeee........................................
        .....ffff111eeeeeeeeee......................................
        ...fffeeeeeeffffeeeeeee.....................................
        ..ffeeeeeeeeeeeefffeeeeee...................................
        ..feeeeeeeeeeeeeeeefeeeee...................................
        ..feeeeededdfeeeeeefeeeeee..................................
        ..ffeedddffdddfeeeefeeeeeeee................................
        ..ffeddddddddddfeeee..eeeeee................................
        ...fedfffdfffddfeee..eeeeee.................................
        ...fed961d9661dfeee.eeee....................................
        ...fed1f1d1f61dfe...eeee....................................
        ...11dff1dff61d11...eeeee...................................
        ...96dddddddddd96.....eee...................................
        ...11dddddddddd11.....eee...................................
        ...fedd3dddedddfe...........................................
        ..feedd3dddeddfee...........................................
        ..fe.fdd3eedddfe............................................
        ..fe..fddddddd.fe...........................................
        ...fe..fffdddd.f............................................
        .........ddddd..............................................
        ........6dddd16ddd..........................................
        .......6dddd666fdd..........................................
        .......fff66666fdd..........................................
        ......ff9966166fdd..........................................
        ......f966616666dd..........................................
        ......f966696666dd..........................................
        ......f966669996d8..........................................
        ......ff9666666688..........................................
        ......df9666666688..........................................
        ......8f9666666688..........................................
        ......8f9666666688..........................................
        .....ddf9666611188..........................................
        ......f111feddd1dd..........................................
        ......1dddfeeed111..........................................
        .....1ddeefeeeedd11.........................................
        .....1dee8feeeeddd11........................................
        ....1dde88ffeeeeddd1........................................
        ....1dee8f8feeeeedd1........................................
        ....1de88f8feeeeedd1........................................
        ....1de88f8ffeeeeed11.......................................
        ....1df88f88fffeeedd1.......................................
        .....f8888f888ffeeed1.......................................
        .....f888f88888feeed1.......................................
        .....f888f88888ffeed1.......................................
        .....f888f888888ffedd.......................................
        .....f888ff88888f...........................................
        .....f88888f8888f...........................................
        .....ff8feefeeeff...........................................
        ........feefeee.............................................
        ........feefeee.............................................
        ........feefeee.............................................
        ........feefeee.............................................
        .......feefeeee.............................................
        ............................................................
        ............................................................
        ............................................................
        `)
    mainCrouchRight = animation.createAnimation(ActionKind.CrouchRight, 100)
    animation.attachAnimation(hero, mainCrouchRight)
    mainCrouchRight.addAnimationFrame(img`
        ............................................................
        ................eeeeee......................................
        ...............eeeeeefee....................................
        ..............eeeeeee111....................................
        .............eeeeeeee669....................................
        ...........eeeeeeeeee111ffff................................
        ..........eeeeeeeffffeeeeeefff..............................
        ........eeeeeefffeeeeeeeeeeeeff.............................
        ........eeeeefeeeeeeeeeeeeeeeef.............................
        .......eeeeeefeeeeeefddedeeeeef.............................
        .....eeeeeeeefeeeefdddffdddeeff.............................
        .....eeeeee..eeeefddddddddddeff.............................
        ......eeeeee..eeefddfffdfffdef..............................
        .........eeee.eeefd1669d169def..............................
        .........eeee...efd16f1d1f1def..............................
        ........eeeee...11d16ffd1ffd11..............................
        ........eee.....69dddddddddd69..............................
        ........eee.....11dddddddddd11..............................
        ................efdddeddd3ddef..............................
        ................eefddeddd3ddeef.............................
        .................efdddee3ddf.ef.............................
        ................ef.dddddddf..ef.............................
        .................f.ddddfff..ef..............................
        ...................ddddd....................................
        ...............ddd61dddd6...................................
        ...............ddf666dddd6..................................
        ...............ddf66666fff..................................
        ...............ddf6616699ff.................................
        ...............dd666616669f.................................
        ...............dd666696669f.................................
        ...............8d699966669f.................................
        ...............8866666669ff.................................
        ...............8866666669fd.................................
        ...............8866666669f8.................................
        ...............8866666669f8.................................
        ...............8811166669fdd................................
        ...............dd1dddef111f.................................
        ...............111deeefddd1.................................
        ..............11ddeeeefeedd1................................
        .............11dddeeeef8eed1................................
        .............1dddeeeeff88edd1...............................
        .............1ddeeeeef8f8eed1...............................
        .............1ddeeeeef8f88ed1...............................
        ............11deeeeeff8f88ed1...............................
        ............1ddeeefff88f88fd1...............................
        ............1deeeff888f8888f................................
        ............1deeef88888f888f................................
        ............1deeff88888f888f................................
        ............ddeff888888f888f................................
        ................f88888ff888f................................
        ................f8888f88888f................................
        ................ffeeefeef8ff................................
        ..................eeefeef...................................
        ..................eeefeef...................................
        ..................eeefeef...................................
        ..................eeefeef...................................
        ..................eeeefeef..................................
        ............................................................
        ............................................................
        ............................................................
        `)
}
function clearGame () {
    for (let value of sprites.allOfKind(SpriteKind.Bumper)) {
        value.destroy()
    }
    for (let value2 of sprites.allOfKind(SpriteKind.Coin)) {
        value2.destroy()
    }
    for (let value3 of sprites.allOfKind(SpriteKind.Goal)) {
        value3.destroy()
    }
    for (let value4 of sprites.allOfKind(SpriteKind.Flier)) {
        value4.destroy()
    }
}
scene.onOverlapTile(SpriteKind.Player, assets.tile`tile1`, function (sprite, location) {
    info.changeLifeBy(1)
    currentLevel += 1
    if (hasNextLevel()) {
        game.splash("Next level unlocked!")
        setLevelTileMap(currentLevel)
    } else {
        game.over(true, effects.confetti)
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Flier, function (sprite, otherSprite) {
    info.changeLifeBy(-1)
    sprite.say("Ow!", invincibilityPeriod * 1.5)
    music.powerDown.play()
    pause(invincibilityPeriod * 1.5)
})
function createEnemies () {
    // enemy that moves back and forth
    for (let value5 of tiles.getTilesByType(assets.tile`tile4`)) {
        bumper = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . f f f f f f . . . . . . 
            . . . f 7 2 7 7 7 2 f . . . . . 
            . . f 7 7 7 2 7 2 7 7 f . . . . 
            . . f 7 7 7 7 7 7 7 7 7 f . . . 
            . f 7 7 7 2 7 7 7 2 7 7 f . . . 
            . f 7 7 7 2 7 7 7 2 7 7 7 f . . 
            . f 7 7 7 7 7 7 7 7 7 7 7 7 f . 
            . f 7 7 7 7 2 2 2 7 7 7 7 7 f . 
            . . f 7 7 2 2 7 2 2 7 7 7 7 f . 
            . . f 7 7 2 7 7 7 2 2 7 7 7 f . 
            . . . f 7 7 7 7 7 7 7 7 7 7 f . 
            . . . . f f 7 7 7 7 7 7 7 f . . 
            . . . . . . f f f f f f f . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.Bumper)
        tiles.placeOnTile(bumper, value5)
        tiles.setTileAt(value5, assets.tile`tile0`)
        bumper.ay = gravity
        if (Math.percentChance(50)) {
            bumper.vx = Math.randomRange(30, 60)
        } else {
            bumper.vx = Math.randomRange(-60, -30)
        }
    }
    // enemy that flies at player
    for (let value6 of tiles.getTilesByType(assets.tile`tile7`)) {
        flier = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . f f f f f f f . . . . 
            . . . . f 4 4 4 4 4 4 4 f . . . 
            . . . f 4 5 5 4 4 4 5 5 4 f . . 
            . f . f 4 4 4 5 4 5 4 4 4 f . f 
            . f f 4 4 4 4 4 4 4 4 4 4 4 f f 
            . f 4 4 4 4 4 5 4 5 4 4 4 4 4 f 
            . f 4 4 4 4 4 5 4 5 4 4 4 4 4 f 
            . f f 4 4 4 4 4 4 4 4 4 4 4 f f 
            . . . f 4 4 5 5 5 5 5 4 4 f . . 
            . . . . f 4 5 4 4 4 5 4 f . . . 
            . . . . . f f f f f f f . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.Flier)
        tiles.placeOnTile(flier, value6)
        tiles.setTileAt(value6, assets.tile`tile0`)
        animation.attachAnimation(flier, flierFlying)
        animation.attachAnimation(flier, flierIdle)
    }
}
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    if (!(hero.isHittingTile(CollisionDirection.Bottom))) {
        hero.vy += 80
    }
})
function showInstruction (text: string) {
    game.showLongText(text, DialogLayout.Bottom)
    music.baDing.play()
    info.changeScoreBy(1)
}
function initializeHeroAnimations () {
    animateRun()
    animateIdle()
    animateCrouch()
    animateJumps()
}
function createPlayer (player2: Sprite) {
    player2.ay = gravity
    scene.cameraFollowSprite(player2)
    controller.moveSprite(player2, 100, 0)
    player2.z = 5
    info.setLife(3)
    info.setScore(0)
}
function initializeLevel (level: number) {
    effects.clouds.startScreenEffect()
    playerStartLocation = tiles.getTilesByType(assets.tile`tile6`)[0]
    tiles.placeOnTile(hero, playerStartLocation)
    tiles.setTileAt(playerStartLocation, assets.tile`tile0`)
    createEnemies()
    spawnGoals()
}
function hasNextLevel () {
    return currentLevel != levelCount
}
function spawnGoals () {
    for (let value7 of tiles.getTilesByType(assets.tile`tile5`)) {
        coin = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . f f f f . . . . . . 
            . . . . f f 5 5 5 5 f f . . . . 
            . . . . f 5 5 5 5 5 5 f . . . . 
            . . . f 5 5 5 4 4 5 5 5 f . . . 
            . . . f 5 5 5 4 4 5 5 5 f . . . 
            . . . f 5 5 5 4 4 5 5 5 f . . . 
            . . . f 5 5 5 4 4 5 5 5 f . . . 
            . . . . f 5 5 5 5 5 5 f . . . . 
            . . . . f f 5 5 5 5 f f . . . . 
            . . . . . . f f f f . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.Coin)
        tiles.placeOnTile(coin, value7)
        animation.attachAnimation(coin, coinAnimation)
        animation.setAction(coin, ActionKind.Idle)
        tiles.setTileAt(value7, assets.tile`tile0`)
    }
}
let heroFacingLeft = false
let coin: Sprite = null
let playerStartLocation: tiles.Location = null
let flier: Sprite = null
let bumper: Sprite = null
let mainCrouchRight: animation.Animation = null
let mainCrouchLeft: animation.Animation = null
let mainJumpRight: animation.Animation = null
let mainJumpLeft: animation.Animation = null
let mainRunRight: animation.Animation = null
let mainRunLeft: animation.Animation = null
let flierIdle: animation.Animation = null
let flierFlying: animation.Animation = null
let mainIdleRight: animation.Animation = null
let mainIdleLeft: animation.Animation = null
let doubleJumpSpeed = 0
let canDoubleJump = false
let coinAnimation: animation.Animation = null
let currentLevel = 0
let levelCount = 0
let gravity = 0
let pixelsToMeters = 0
let invincibilityPeriod = 0
let hero: Sprite = null
scene.setBackgroundImage(img`
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdd1111111111
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffddd1111111111
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdddf1111111111
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffddddddf1111111111
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdddddddf1111111111
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffddddddddf1111111111
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdddddddddf1111111111
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffddddddddddfd1111111111
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdddddddddddfd1111111111
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffddddddddddddff1111111111
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdddddddddddddddf1111111111
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffddddddddddddddddf1111111111
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffddddddddddddddddff111111111
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffddddddddddddddddddf111111111
    fffffffffffffffffffffffffffffffffffffffffff91999999991111ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdddddddddddddddddddf111111111
    fffffffffffffffffffffffffffffffffffffff99911999999999999999911ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffddddddddddddddddddddf111111111
    fffffffffffffffffffffffffffffffffff9999911199999999989999999999999991fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffddddddddddddddddddddf111111111
    ffffffffffffffffffffffffffffffffff111111999999888889999998888888889999911ffffffffffffffffffffffffffffffffffffffffffffffffffffffffdddddddddddddddddddddf111111111
    ffffffffffffffffffffffffffffffff119999999888889988888888999998888888999991ffffffffffffffffffffffffffffffffffffffffffffffffffffffddddddddddddddddddddddf111111111
    ffffffffffffffffffffffffffffff119999988888811111111111111118899999988899991998fffffffffffffffffffffffffffffffffffffffffffffffffdddddddddddddddddddddddf111111111
    ffffffffffffffffffffffffffff91199888888888188888ffffffffffffff8888119889991199998ffffffffffffffffffffffffffffffffffffffffffffffdddddddddddddddddddddddf111111111
    ffffffffffffffffffffffffff81199888888881188fffffffffffffffffffffffff11119991119999888ffffffffffffffffffffffffffffffffffffffffffdddddddddddddddddddddddf111111111
    fffffffffffffffffffffffff11999888888811fffffffffffffffffffffffffffffffff1989911999988888ffffffffffffffffffffffffffffffffffffffddddddddddddddddddddddddf111111111
    fffffffffffffffffffffff8119999888888fffffffffffffffffffffffffffffffffffff11188119999988888fffffffffffffffffffffffffffffffffffdddddddddddddddddddddddddf111111111
    ffffffffffffffffffffff8119999988f1fffffffffffffffffffffffffffffffffffffffffff11811999998888ffffffffffffffffffffffffffffffffffdddddddddddddddddddddddddf111111111
    ffffffffffffffffffffff9199999ff11ffffffffffffffffffffffffffffffffffffffffffffff1891111999988ffffffffffffffffffffffffffffffffddddddddddddddddddddddddddf111111111
    fffffffffffffffffff889199998111ffffffffffffffffffffffffffffffffffffffffffffffffff1899111999988ffffffffffffffffffffffffffffffddddddddddddddddddddddddddf111111111
    ffffffffffffffffff8889199999998888888888888ffffffffffffffffffffffffffffffffffffffff899911999998ffffffffffffffffffffffffffffdddddddddddddddddddddddddddf111111111
    ffffffffffffffffff89919111111111111199999999999999999fffffffffffffffffffffffffffffff888991199998fffffffffffffffffffffffffffddddddddddddddddfffffffff11f111111111
    fffffffffffffffff99919999999999999991111111999999999999fffffffffffffffffffffffffffffff88891119999ffffffffffffffffffffffffffdddddddddddddddff1111111111f111111111
    fffffffffffffff8991119998889999999999999999119999999999999fffffffffffffffffffffffffffff88889111999fffffffffffffffffffffffffddddddddddddddddff1111111111111111111
    ffffffffffffff899119998888888888888888888888811111199999999988fffffffffffffffffffffffffff88899919998ffffffffffffffffffffffddddddddddddddddd1f1111111111111111111
    ffffffffffff899119999999888888fffffffff8888888888811111111119888ffffffffffffffffffffffffff88889919998fffffffffffffffffffffdddddddddddddddddddf111111111111111111
    fffffffffff8111199998fffffffffffffffffffff88888888888889999911118ffffffffffffffffffffffffff88889911988fffffffffffffffffffdddddddddddddddddddddff1111111111111111
    fffffffffff1199998fffffffffffffffffffffffffffff88888888888999999111fffffffffffffffffffffffff8888991998fffffffffffffffffffddddddddddddddddddddddff111111111111111
    fffffffff11999988ffffffffffffffffffffffffffffffffffffff888999999999111ffffffffffffffffffffffff888991988ffffffffffffffffffddddddddddddddddddddddd1f11111111111111
    fffffffff1999988ffffffffffffffffffffffffffffffffffffffffff88999999999f1ffffffffffffffffffffffff889991888ffffffffffffffffdddddddddddddddddddddddddfff111111111111
    fffffffff9998888ffffffffffffffffffffffffffffffffffffffffffff889999999911ffffffffffffffffffffffff88991988ffffffffffffffffdddddddddddddddddddddddddd1ff11111111111
    ffffffff99998888fffffffffffffffffffffffffffffffffffffffffffff8888999999919fffffffffffffffffffffff89919988fffffffffffffffddddddddddddddddddddddddddd1ff1111111111
    fffffff9999888ffffffffffffffffffffffffffffffffffffffffffffffffff88899999919fffffffffffffffffffffff8991988ffffffffffffffddddddddddddddddddddddddddddd1ff111111111
    ffffff9999888fffffffffffffffffffffffffffffffffffffffffffffffffffff8888999919ffffffffffffffffffffff88919988fffffffffffffddddddddddffffffffffffdddddddd1f111111111
    ffff18999988fffffffffffffffffffffffffffffffffffffffffffffffffffffff8888999919ffffffffffffffffffffff8919988ffffffffffffdddddddfffffffffffffffffdddddddddf11111111
    fff18999988fffffffffffffffffffffffffffffffffffffffffffffffffffffffff8888899119fffffffffffffffffffff8911988ffffffffffffddddddffffffffffffffffffffdddddddf11111111
    ff119999981ffffffffffffffffffffffffffffffffffffffffffffffffffffffffff888899911ffffffffffffffffffffff891998fffffffffffddddddddddddddddddffffffffffdddddddff111111
    ff8899998888888888888888888888ffffffffffffffffffffffffffffffffffffffffff88899199ffffffffffffffffffff891998fffffffffffdddddddddddddddddddddffffffffddddddddff1111
    ff899999888888888999999999999999888888ffffffffffffffffffffffffffffffffffffff9199fffffffffffffffffffff91998fdddfffffffddddddddddddddddddddddffffffffddddddddfff11
    ff111111111111111111111111111111111888888fffffffffffffffffffffffffffffffffff9919888888888888888fffffff999fdddddddffffdddddddddddddddddddddddffffffffddddddddd1ff
    ff999999999999999999999999999999999111988888ffffffffffffffffffffffffffffffff8919988888888888888888888f999ddddddddffffddddddddddddddddddddddddffffffffddddddddd11
    ff9999999999999999998888888888999999911998888fffffffffffffffffffffffffffffff8919988888888888899999888fffddddddddddfffdddddddddddddddddddddddddfffffffddddddddddd
    1999988888889988ffffffffff88888899999991198888ffff8888888888ffffffffffffffff8819111999999999999999888fffdddddddddddffdddddddddddddddddddddddddffffffffdddddddddd
    9999988888998fffffffffffffffffffff8899999118888f88888811188888ffffffffffffff88919991111111111111118881fdddddffddddddfddddddddddddddddddddddddddffffffffddddddddd
    999988889998fffffffffffffffffffffffff889991988888899919911199888ffffffffffff891199999999999999998888891ddddddffdddddfddddfffffffffffffffffffffddffffffffdddddddd
    9998888898ffffffffffffffffffffffffffffff9911988889981fffff818988fffffffffff8991999ffffffffffffffffff88ddddddddffdddddddddfdd11111111111111111fffffffffffdddddddd
    998888888fffffffffffffffffffffffffffffff89919989998f1ffffff111988ffffffffff891999fffffffffffffffffffffdddddddddffddddddddfdd11111111111111111111fffffffffddddfff
    88888888fffffffffffffffffffffffffffffffff899199999f11ffffffff8888ffffffffff89199ffffffffffffffffffffffddddddddddffdddddddfdd111111111111111111111fffffffffffffff
    9988888ffffffffffffffffffffffffffffffffffff919999981ffffffffff888fffffffff89119fffffffffffffffffffffffdddddddddddfdddddddf111111111111111111111111fffffffffffffd
    998888fffffffffffffffffffffffffffffffffffff99199991fffffffffffffffffffffff89199fffffffffffffffffffffffdddddddddddffddddddf1111111111111111111111111fffffffffffdd
    998888ffffffffffffffffffffffffffffffffffffff9199991fffffffffffffffffffffff91998fffffffffffffffffffffffddddddddddddfdddddddf1111111111111111111111111fffffffffddd
    99888fffffffffffffffffffffffffffffffffffffff8919991ffffffffffffffffffffff891998fffffffffffffffffffffffddfdddddddddffddddddf111111111111111111111111111ffffdddddd
    99888fffffffffffffffffffffffffffffffffffffff8891991ffffffffffffffffffffff991988fffffffffffffffffffffffddfddddddddddfddddddf111111111111111111111111111111ffddddf
    99888ffffffffffffffffff8888888888fffffffffff8881991ffffffffffffffffffffff991988fffffffffffffffffffffffddfddddddddddfddddddf1111111111111111111111111111111dfdddd
    99888ffffffffffffffff8888899999888ffffffffff8989119ffffffffffffffffffffff91988ffffffffffffffffffffffffddfddddddddddfddddddf11111111111111111111111111111111fdddd
    9988fffffffffff9999999999998888998ffffffffff8989119fffffffffffffffffffff991988ffffffffffffffffffffffffdddfdddddddddfdddddddf1111111111111111111111111111111dfddd
    9988ffffffffff99991111199fffff88998fffffffff8989119ffffffffffffffffffff9991988ffffffffffffffffffffffffdddfddddddddfddddddddff1111111111111111111111111111111fddd
    9988ffffffff9999911999999ffffff88988ffffffff8889119ffffffffffffffffffff999188fffffffffffffffffffffffffdddfdddddddfddddddddddff111111111111111111111111111111fddd
    9988ffffffff9999118888ffffffffff8898ffffffff8889119fffffffffffffffffff8999188ffffffffffffffffffffffffffddfdddddffddddddddddddf111111111111111111111111111111fddd
    9988ffffffff9991188888fffffffffff898ffffffff8889119fffffffffffffffffff8999188ffffffffffffffffffffffffffddfdddddfdddddddddddddff11111111111111111111111111111fddd
    9988ffffffff9118888888fffffffffff898ffffffff8889119ffffffffffffffffff88999188ffffffffffffffffffffffffffddfdddddfffddddddddddddff1111111111111111111111111111fddd
    9988ffffffff919888888ffffffffffff898ffffffff8889119fffffffffffffffff88999918fffffffffffffffffffffffffffddfddddddddfddddddddddddf1111111111111111111111111111fddd
    9988ffffffff119888888ffffffffffff889ffffffff88891199ffffffffffffffff8899991ffffffffffffffffffffffffffffddfddddddddfddddddddddddff111111111111111111111111111fddd
    9998ffffffff19988888fffffffffffff889ffffffff889911999fffffffffffffff8899918fffffffffffffffffffffffffffffdffffffdddfdddddddddddddfd11111111111111111111111111fddd
    9998ffffffff1998888fffffffffffff8889fffffff88891911999ffffffffffffff899991ffffffffffffffffffffffffffffffddddddffddfdddddddddddddffd1111111111111111111111111fddd
    9998ffffffff1998888ffffffffffff88898fffffff889199819999ffffffffffff8899991ffffffffffffffffffffffffffffffdddddddfffdddfdddddddddddffff11111111111111111111111fddd
    9998ffffffff1998888fffffffffff888998ffffff88891998911999ffffffffff8889991fffffffffffffffffffffffffffffffddddddddffddffddddddddddddddfff111111111111111111111fddd
    9998ffffffff9198888fffffffff8889998ffffff8889919988991198ffffffff8889991fffffffffffffffffffffffffffffffffddddddddddfffddddddddddddddddff11111111111111111111fddd
    99988fffffff9199888fffffffff888988fffffff889919988889911188111118888999ffffffffffffffffffffffffffffffffffffdddddffffffdddddddddddddddddffd1111111111111111111fdd
    99988fffffff9919888fffffffff8888ffffffff88891998f888899991199999999899ffffffffffffffffffffffffffffffffff8889f88888ffffddddddddddddddddddffdd11111111111111111fdd
    99988ffffffff9199888fffffffffffffffffff88891999fff8889999991111111111fffffffffffffffffffffffffffffffffff9999f91988ffffdddddddddddddddddddffffd111111111111111fdd
    99988ffffffff9919888ffffffffffffffffff888991998fffff88999999999999999fffffffffffffffffffffffffffffffff889998f9118fffffdddddddddddddddddddddddffffffff11111111fdd
    99118ffffffff99199888ffffffffffffffff888999199ffffffffff888888889999fffffffffffffffffffffffffffffffff8889998f9919fffffdddddddddddddddddddddddddddddd1fffff111ffd
    998188fffffff89919988ffffffffffffffff88999198fffffffffffff88888888fffffffffffffffffffffffffffffffffff8881998f9911fffffdddddddddddddddddddddddddddddddddddddffffd
    998188ffffffff99119888fffffffffffffff8999198ffffffffffffffffffffffffffffffffffffffffffffffffffffffff88819998f8991fffffdddddddddddddddddddddddddddddddddddddddddd
    889198fffffffff99199981fffffffffffff8991199ffffffffffffffffffffffffffffffffffffffffffffffffffffffff888919998f8991fffffdddddddddddddddddddddddddddddddddddddddddd
    9991998ffffffff891999988ffffffffff88891199fffffffffffffffffffffffffffffffffffffffffffffffffffffffff88919999ff8991fffffdddddddddddddddddddddddddddddddddddddddddd
    9999199fffffffff891999981111fffff889919988fffffffffffffffffffffffffffffffffffffffffffffffffffffffff8919999fff8991fffffdddddddddddddddddddddddddddddddddddddddddd
    9999199fffffffff88199999999111188889119988ffffffffffffffffffffffffffffffffffffffffffffffffffffffff89199998fff8919fffffdddddddddddddddddddddddddddddddddddddddddd
    99991199fffffffff8811999999999888991199888fffffffffffffffffffffffffffffffffffffffffffffffffffffff89199998ffff8999fffffdddddddddddddddddddddddddddddddddddddddddd
    ff9991999fffffffff8811119999999991199988fffffffffffffffffffffffffffffffffffffffffffffffffffffffff9199998fffff9999fffffdddddddddddddddddddddddddddddddddddddddddd
    ff99919999fffffffff8888911111111199998ffffffffffffffffffffffffffffffffffffffffffffffffffffffffff891999ffffff99999fffffdddddddddddddddddddddddddddddddddddddddddd
    fff99919999fffffffff888888899999999988ffffffffffffffffffffffffffffffffffffffffffffffffffffffffff91998fffff999999fffffffddddddddddddddddddddddddddddddddddffddddd
    fff999919999fffffffff888888888888888fffffffffffffffffffffffffffffffffffffffffffffffffffffffff99919998fffff99999ffffff2fddddddddddddddddddddddddddddddddddfdddddd
    fff99991999999ffffffff88888888888fffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9991999fffffff9999ff2fff22ffdddddddddddddddddddddddddddddddddfdddddd
    ffff99991999999ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9991199fffffffff222222222222fdddddddddddddddddddddddddddddddddfddfffd
    fffff999199999999ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9991988fffffff222222222222222fddddddddddddddddddddddddddddddddfdddddf
    fffff8999199999999ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff99119888fffff222222222222222222fdddddddddddddddddddddddddddddddfdddddd
    fffff88991199999999fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff91998888fff22222222222222222222ffdddddddddddddddddddddddddddddddffdddd
    ffffff88991188999999ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19988888822222222222222222222222ffdddddddddddddddddddddddddddddddddddd
    fffffff899919889999988fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1999898822222222222222222222222222fdddddddddddddddddddddddddddddddddddd
    fffffff8899199888999988ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1199991822222222222222222222222222222fddddddddddddddddddddddddddddddddddd
    fffffff88891998889999998ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19999998f222222222222222222222222222222ffddddddddddddddddddddddddddddddddd
    ffffffff889199988899999988ffffffffffffffffffffffffffffffffffffffffffffffffffffffffff11899991ff222222222222222222222222222222222ffddddddddddddddddddddddddddddddd
    ffffffff8889199988899999998ffffffffffffffffffffffffffffffffffffffffffffffffffffff881999999ff222222222222222222222222222222222222ffdddddddddddddddddddddddddddddd
    fffffffff8891199888899999998ffffffffffffffffffffffffffffffffffffffffffffffffff888119999999f22222222222222222222222222222222222222fffdddddddddddddddddddddddddddd
    ffffffffff88919998888899999998ffffffffffffffffffffffffffffffffffffffffffffff8881199999999f22222222222222222222222222222222222222222ffddddddddddddddddddddddddddf
    ffffffffff88891199ff888999999888ffffffffffffffffffffffffffffffffffffffffff888119999999ff22222222222222222222222222222222222222222222ffddddddddddddddddddddddfffd
    fffffffffff88991999fff888999119881ffffffffffffffffffffffffffffffffffff8899999199999998ff2222222222222222222222222222222222222222222222fffdddddddddddddddfddffddd
    ffffffffffff88991999fff88899991111111111111111111ffffffffffffff99999999911111999999888f222222222222222222222222222222222222222222222222ffddddddddddddddddddddddd
    fffffffffffff88911999fff8889999999999998888888888111199999999999999911119999999998888822222222222222222222222222222222222222222222222ff55ffddddddddddddddddddddd
    fffffffffffff888911998fff8888999999999999999999999999111111111111111999999888888888ff2222222222222222222222222222222222222222222222ff55555ffdddddddddddddddddddd
    ffffffffffffff88891999fffff8888899999999999999999999999999999999998888888888888888ff2222222222222222222222222222222222222222222222ff55555555fffddddddddddddddddd
    fffffffffffffff88891999ffffff8888888899999999999999999888888888888888888888888888ff2222222222222222222222222222222222222222222222ff55555555555ffdddddddddddddddd
    ffffffffffffffff888919999fffffffff8888888888888888888888888888888888888888888888fff2222222222222222222222222222222222222222222222f55555555555555ffdddddddddddddd
    fffffffffffffffff888119999fffffffffffffffffffffffffffffffffffffffff888888888ffffff2222222222222222222222222222222222222222222222ff55555555555555fdfffddddddddddd
    fffffffffffffffffff88911999fffffffffffffffffffffffffffffffffffffffffffffffffffffff2222222222222222222222222222222222222222222222f555555555555555fddddfffdddddddd
    ffffffffffffffffffff889919999fffffffffffffffffffffffffffffffffffffffffffffffffff222222222222222222222222222222222222222222222222f555555555555555fdddddddffffffff
    ffffffffffffffffffffff89919999ffffffffffffffffffffffffffffffffffffffffffffffff22222222222222222222222222222222222222222222222222f555555555555555fddddddddddddddd
    fffffffffffffffffffffff8991999999fffffffffffffffffffffffffffffffffffffffffffff22222222222222222222222222222222222222222222222222f555555555555555fddddddddddddddd
    fffffffffffffffffffffffff8911999999ffffffffffffffffffffffffffffffffffffffffff222222222222222222222222222222222222222222222222222ff55555555555555fddddddddddddddd
    fffffffffffffffffffffffffff811199999ffffffffffffffffffffffffffffffffffffffff2222222222222222222222222222222222222222222222222222f.f5555555555555fddddddddddddddd
    fffffffffffffffffffffffffffff811119998888ffffffffffffffffffffffffffffffffff22222222222222222222222222222222222222222222222222222ff5f555555555555fddddddddddddddd
    ffffffffffffffffffffffffffffff88911199999888ffffffffffffffffffffffff8888ff2222222222222222222222222222222222222222222222222222222f55ff555555555ffddddddddddddddd
    fffffffffffffffffffffffffffffff8899911111199999ffffffffff888888888888888f22222222222222222222222222222222222222222222222222222222f5555ff5555555fdddddddddddddddd
    fffffffffffffffffffffffffffffffff8899999991111111888888888888888888888999222222222222222222222222222222222222222222222222222222222f55555ff555fffdddddddddddddddd
    ffffffffffffffffffffffffffffffffffff8889999999999111118888888888899988122222222222222222222222222222222222222222222222222222222222f5555555ff55fddddddddddddddddd
    fffffffffffffffffffffffffffffffffffffffff888999999999911111111111199882222222222222222222222222222222222222222222222222222222222222f55555555ff.ffddddddddddddddd
    ffffffffffffffffffffffffffffffffffffffffffff889999999999999999999911882222222222222222222222222222222222222222222222222222222222222ff555555555fffddddddddddddddd
    ffffffffffffffffffffffffffffffffffffffffffffff88899999999999999999998222222222222222222222222222222222222222222222222222222222222222f555555555555ffddddddddddddd
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffff8899999999988222222222222222222222222222222222222222222222222222222222222222f5555555555555ffdddddddddddd
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2222222222222222222222222222222222222222222222222222222222222fffff5555555555555fffdddddddddd
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff222222222222222222222222222222222222222222222222222222222fffff2222f55555555555555ffdddddddddd
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff222222222222222222222222222222222222222222222222222ffffff222222222ff55555555555555ffddddddddd
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff22222222222222222222222222222222222222222fffffffffff222222222222222fff555555555555555fdddddddd
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff222222222222222222222222222222222222fffff22222222222222222222222222f5f555555555555555ffddddddd
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff222222222222222222222222222222222ffff222222222222222222222222222222ff5ff555555555555555ffdddddd
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff222222222222222222222222222222fff2222222222222222222222222222222222f555f55555555555555555fddddd
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2222222222222222222222222222fff2222222222222222222222222222222222222f5555f5555555555555555fffddd
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff22222222222222222222222fffff2222222222222222222222222222222222222222f5555ff55555555555555555ffdd
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff22222222222222222222ffff2222222222222222222222222222222222222222222f555555ff55555555555555555ffd
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2222222222222222222f2222222222222222222222222222222222222222f222222f5555555ff55555555555555555ff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff22222222222222222ff22222222222222222222222222222222222222222f22222f555555555ff555555555555555555
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2222222222222222f22222222222222222222222222222222222222222222f2222f5555555555ff55555555555555555
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff22222222222222ff222222222222222222222222222fff222222222222222f2222f55555555555f55555555555555555
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2222222222222ff222222222222222222222222222f2222222222222222222f222fff555555555555555555555555555
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff222222222222f22222222222222222222222222fff22222222222222222222f22222ff55555555555555555555555555
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff22222222222f2222222222222222222222222ff22222222222222222222222ff22222ff5555555555555555555555555
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2222222222f222222222222222222222222ff22222222222222222222222222f2222222fff5555555555555555555555
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2222222ffff2222222222222222222222ff22222222222222222222222222222f22222222ffff5555555555555555555
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2222fff2f2222222222222222222222f222222222222222222222ff22222222ff2222222222fffff555555555555555
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2222f2222222222222222222222222f222222222222222222222222f222222222f22222222222222ffff55555555555
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2222f222222222222222222222222ff22222222222222222222222222f222222222ff2222222222222222fffff555555
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff222ff222222222222222222222222f2222222222222222222222222222f222222222ff22222222222222222222ffff55
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff222ff2222222222222222222222ff222222222222222222222222222222f2222222222ff2222222222222222222222ff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff222ff222222222222222222222ff2222222222222222222222222222222f222222222222ffff22222222222222222222
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff222ff22222222222222222222ff2222222222222222222222222222222222ff2222222222222ff2222222222222222222
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2ff2222222222222222222ff2222222222222222222222222222222222222fff222222222222fffff22222222222222
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff.ff2222222222222222222ff22222222222222222222222222222222222222222ff22222222222222ffff22222222222
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2222222222222222222ff2222222222222222222222222222222222222222222fff222222222222222222222222222
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2222222222222222222222222222222222222222222222222222222222222222222f22222222222222222222222222
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff222222222222222222222222222222222222222222222222222222222222222222222ffff2222222222222222222222
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff22f2222222222222222222222222222222222222222222222222222222222222222222222222ff22222222222222222222
    `)
hero = sprites.create(img`
    ............................................................
    ............................................................
    ............................................................
    .....................eee....................................
    ....................ee1ee...................................
    ....................ef96e...................................
    ..................ffef11ffff................................
    ................ffeefffeeeeeff..............................
    ...............feeeeeeeeeeeeeee.............................
    ..............feeeeeeeeeeeeeeeee............................
    ..............feeeeeeeeeeeeeeeee............................
    ..............feeeeeeeeeeeeeeeee............................
    ..............feeeeeedfedfeeeeee............................
    ..............feeeddddffedfeeeee............................
    ..............feeddddddddddfeeee............................
    ..............feeddfffddfffdfeee............................
    ..............ffedd111dd111ddfee............................
    ...............fed1966dd9661dfe.............................
    ...............ffd191fdd1f61dff.............................
    ...............11d19ffddff61d11.............................
    ...............96dddddddddddd96.............................
    ...............11ddd3ddddeddd11.............................
    ...............feddd3ddddedddfe.............................
    ..............feefddd33eedddffe.............................
    ..............fee.fddddddddf.fe.............................
    ..............fee..ffddddff..fe.............................
    ...............f.....ffff...fe..............................
    ...............fe....fddf...fe..............................
    ....................ffddff...fe.............................
    ...................f16dd61f.................................
    ..................f16dddd61f................................
    .................f9666666666f...............................
    .................f9666666666f...............................
    .................f9666666666f...............................
    .................f9666166666f...............................
    .................df96661996fd...............................
    .................ddf966666fdd...............................
    .................8df966666fd8...............................
    .................88f966666f88...............................
    .................88f966666f88...............................
    .................88f966666f88...............................
    .................88111f1fff88...............................
    .................1dddde1defd................................
    ...............11ddeeee1deeff...............................
    ...............1ddeeee81deeef...............................
    ..............11deeee8811deeef..............................
    ..............1deeee888881deef..............................
    ..............1deee8888881dddf..............................
    ...............1ee8888f88811ddf.............................
    ...............1e88888f8888811f.............................
    ................ff888f.f8888f...............................
    .................f888fff8888f...............................
    ................f88888f88888f...............................
    ................f88888f8888f................................
    ................f88888f88888f...............................
    .................f8eeeff8eeef...............................
    ...................eee.f8eeef...............................
    ...................eee...eeef...............................
    ...................eeee..eeee...............................
    ...................eeeee.eeeee..............................
    `, SpriteKind.Player)
// how long to pause between each contact with a
// single enemy
invincibilityPeriod = 600
pixelsToMeters = 30
gravity = 9.81 * pixelsToMeters
scene.setBackgroundImage(img`
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999bbbbb9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    999999999999999999999999999999999999999bbddddbb99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    99999999999999999999999999999999999999dbddddddddddddd99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    99999999999999999999999999999999999999bbdddddddddddddd9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999bbddddddddddddddddd99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    999999999999999999999999999999999999bbdddd11111111dddddd99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    99999999999999999999999999999999999bbdddd11111111111dddd99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999bbddddd111111111111dddd999999999999999999bbbbbbbbbbbbbbbbbbbbbbbbbbbbbddddddd9999999999999999999999999999999999999999999999999
    999999999999999999999999999999999dbdddd11111111111111ddddd9999999999999999bbdddddddddddddddddddddddddddbbbbbbbbbbdd999999999999999999999999999999999999999999999
    99999999999999999999999999999999dbddddd111111111111111ddddd9999999999999bbddddddddddddddddddddddddddddddddddddddddddd9999999999999999999999999999999999999999999
    9999999999999999999999999999999dbbdddd1111111111111111dddddddddd99999999bddddd1111111111111111111111111111111dddddddd9999999999999999999999999999999999999999999
    999999999999999999999999999999bbddddd1111111111111111111ddddddddd999999bddddd111111111111111111111111111111111111ddddd999999999999999999999999999999999999999999
    999999999999999111111bbbbbbbbbbddddd11111111111111111111dddddddddd9999bddddd11111111111111111111111111111111111111dddd999999999999999999999999999999999999999999
    999999999999999199bbbbdddddddddddddd1111111111111111111111111dddddd99bbdddd1111111111111111111111111111111111111111ddddd9999999999999999999999999999999999999999
    9999999999999991bbbddddddddddddddd1111111111111111111111111111dddddd9bddddd1111111111111111111111111111111111111111dddddd999999999999999999999999999999999999999
    9999999999999dbbbddddddddddddddd1111111111111111111111111111111ddddd9bbddd111111111111111111111111111111111111111111dddddd99999999999999999999999999999999999999
    999999999999dbbdddddddddd111111111111111111111111111111111111111dddd99bbdddd11111111111111111111111111111111111111111dddddd9999999999999999999999999999999999999
    99999999999bbbddddddd11111111111111111111111111111111111111111111ddd199bddddd11111111111111111111111111111111111111111ddddddd99999999999999999999999999999999999
    999999bbbbbbddddd111111111111111111111111111111111111111111111111ddd1999bddddd111111111111111111111111111111111111111111dddddd9999999999999999999999999999999999
    99bbbbbddddddddd1111111111111111111111111111111111111111111111111dddd199b9dddd1111111111111111111111111111111111111111111ddddddd99999999999999999999999999999999
    9bbddddddddddd111111111111111111111111111111111111111111111111111dddd199b9dddd111111111111111111111111111111111111111111111dddddd9999999999999999999999999999999
    bbdddddddddddddddddddddddddd1111111111111111111111111111111111111ddddd999b9ddd1111111111111111111111111111111111111111111111dddddddd9999999999999999999999999999
    bdddddddddddbbbbbbbbdddddddddddd1111111111111111111111111111dddddddddd999b9dddd11111111111111111111111111111111111111111111111dddddddddd999999999999999999999999
    bbbbbbbbbbbbbdddddddddddddddddddddd11111111111111111111111dddddddddddd999b9ddddd11111111111111111111111111111111111111111111111ddddddddd999999999999999999999999
    99999999999999999999999999ddddddddddd11111111111111111111ddddddddddddd999b9ddddd11111111111111111111111111111111111111111111111111ddddddddddd9999999999999999999
    999999999999999999999999999999ddddddddd1111111111111dddddddddd11111111999b9dddddddd11111111111111111111111111111111111111111111111111ddddddddddd9999999999999999
    99999999999999999999999999999999ddddddd1111111111dddddddddddd999999999999bbdddddddddd1111111111111111111111111111111111111111111111111ddddddddddddd9999999999999
    99999999999999999999999999999999999ddddddddddddddddddddddddd99999999999999bdddddddddddd1111111111111111111111111111111111111111111111111111dddddddd9999999999999
    999999999999999999999999999999999999ddddddddddddddddddd9999999999999999999bdddddddddddddd11111111111111111111111111111111111111111111111111111ddddd9999999999999
    9999999999999999999999999999999999999dddddddddddddd99999999999999999999999bbdddddddddddddddddddddd1111111111111111111111111111111111111111111111dddd999999999999
    999999999999999999999999999999999999999999999999999999999999999999999999999bbdddddddddddddddddddddddddddd111111111111111111111111111111111111111dddd999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999bbbbbbbbbbbbbbbbbbbbbbbbddddddd1111111111111111111111111111111111111ddddd99999999999
    99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dddddbdddddddd11111111111dddddddddd111111111111111dddd99999999999
    99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999b9dddddd111111111ddddddddddddddddddddddddddddddd99999999999
    999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999b9dddddd11111111ddddddddddddddddddddddddddddddd19999999999
    999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999bb91ddddd1111111dddd999999dddddddddddddddddddd119999999999
    e9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991ddddd11111dddd999999999999111999999999999999999999999
    ee999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dddddd111ddddd999999999999999999999999999999999999999
    eee999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dddddddddddd9999999999999999999999999999999999999999
    eeee9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999ddddddddd99999999999999999999999999999999999999999
    eeee9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dddddddd99999999ddddddd999999999999999999999999999999999999999999
    e4eee999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dddddddd999999999999999999999999999999999999999999999999999999999
    e4eee999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dddddddd999999999999999999999999999999999999999999999999999999999
    84eeeee9899999998999999989999999899999998999999989999999899999998999999989999999899999998999999d6dd6ddd989999999899999998999999989999999899999998999999989999999
    e4eeeeee99999999999999999999999999999999999999999999999999999999999999999999999999999ddddddd99ddddddddd99999777799999999999ddddd99999999999999999999999999999999
    ee4eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee99999999999999999999999999999999999999999ddddddddd99ddddddddd99999777799999999999ddddd99999999999999999999999999999999
    eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee99999999999999999999999eeeeeee9999999d666dd6dd99ddddddddd99999777777999999999d6dddd9999999999999999999999999999999
    eeee8eeeeeee8e444eee8eeeeeee8eeeeee48eeeeeee8444444eeeeeeeeeeeeeeeeeeeeeeeeeeeee999d666dddddd5dddd6dddd55555577777755555599dd6ddd9998999999989999999899999998999
    eeeeeeeeeeeeee44e4444eeeeeeeeeeeeeee44eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee55d666dddddd5ddddddddd55544477777755555555dddddd5999999999999999999999999999999
    ee4eeeeeee4eeeee444ee4444eeeeeeeeeeeee44eeeeeeeeeeeeeee44444444ee4eeeeeeeeeeee55555dddddddddd5ddddd6ddd55544444777755555555ddddddd555554449999999999999999999999
    e4eeeeeeeee4eeeeeee444eee44444eeeeeeeeee4444eeeeeeeeeeeeeeeee4eeeeeeeeeeeeeee555555ddddddd6dd5ddddddddd55444444eeeee55555555dddddd555544445559999999999eeeeeeeee
    84ee8e448eee8eee8eee8e44444e4e4444ee8eee8eee44448eee8eee8eee8eee8eee8e4e8ee55555555dddddddddd5dd6dddddd554444eeddeee55555555d6dddd555444445555555eeeeeee8eee8eee
    e4eeeeee44eeeee7eeeeeeeeeeeee4444444444444eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee57777555dddddddddd5dd6dddddd54444eedddeeeee555555dd6ddd55444445555555555eeeeeeeeeeeee
    ee4eeeeeee444eeeeeeeeeeeeeeeeeeeeeeeeeeeee4444444eeee4eeeeeeeeeeeeeeeeeee5557777755dd666dd6dd5ddddddddd54444eddd6eeeee5555555dd6dd54444445555555555555544eee4eee
    ee4eeeeeeeeeeeeeeeee44eeeeeeeeeeeeeeeeeeeeeeeeee444e4eeeeeeeeeeeeeeeeee555557777755dd666ddddd5ddddddddd544445dddddeeee5555555ddddd4444455555555777777555eeee4eee
    8e4e8eee8eee8eee8eee8eee8eee8eee8ee48eee8eee8eee8ee48eee8e4444eeeeee8ee555557777755dd666ddddd5ddddd6ddd444458ddddddeeee585558ddddd44444585555557777775555eee4eee
    ee4eeeeeeeeeeeeeeeee4eeeeeeeee44444e44444444444444444eeeeeeeeeeeeeeeee444455eeee555dddddddddd5ddd6ddddd444455ddddddeeeee55555dd6dd444455555555577eee755555ee44ee
    ee4eeeeee4eeeeeeeeee4eeeeeeeeeeeeeeeeeeeeeeee4444eeeeeeeeeeeeeeeeeeeee44445eeeee555dddddddddd5ddddddddd444455dd6dddeeeee55555dd6dd444555555555577eee5555555eee4e
    ee4eeeee4eeeeeeeeeee4eeeeeeeeeeeeeeeeee44eeeeee4eeeeeeeeeeeeeeeeeeeeee44445eeeee555dddddddddd5ddddddddd4444555ddddd5eeee55555dddddd55555555555555eeedd555555ee4e
    eee484ee4ee444ee4ee48eeeeeeeeeeee444444e8eeeeeee8eee8ee4444444ee8eee8e44455eeeeee55ddddddd6dd5dddddddd4444458dd6ddd58555855585ddddd58ddddd5585558d6ddd5555555ee4
    eee4e4eeeeeeeeeee44eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee44444eeee44445eee57775dddddddddd55555dd477777455dd6ddd55555544455ddddd55dd6ddd555555ddddd5555555eee
    ee844eeeee8eeeeeee4eeeeeee8ee4eeee8eeeeeee6ee66eeeeeeeeeee8eeeeeee8eee44445eeee7777dddddd6ddd5555584777777755ddd6dd555554444555555855dddddd555555ddddd55555555ee
    eeee4eeeeeeeeeeeee4eeeeeeeeeeeeeeeeeeeeeeee9eeeee9eeeeeeeeeeeeeeeeeeee44444eeee7777ddddddddddd555554777777775dddddd555544444777777755dd6ddd555555ddddd55555555ee
    8e4e8eee8eee8eee8eee8eee8eee84ee8eee8ee6ee777777777777778e6e8eee8eee8ee44444eee577758ddddddddd558444777777778dddddd585444445777777758dd6ddd585558d6ddd555555555e
    eeee4eeeeeeeeeeeeeeeeeeeeeee44eeeee77777777777777777777777766666eeeeeee4444444555eee5ddd6ddddd544444477777775dd6ddd5554444777777777555d6ddd555555ddddd555555555e
    ee8e444eee8eee8eeeeeee8eee44ee77777777777777777777777777777777776eeeee8e444444455eee5ddddddddd4444444eee55555dddddd5544444777777777555ddddd5558556dddd855555555e
    eeeeeee4444eeeeeeeee77774477777777777777666677777667766776677667766eeeeeee4444444eee5ddddddddd44444eeeeee5555dddddd5444445777777777555ddddd555555ddddd555555555e
    8eee8eee8ee44444444444446666666676677777777777776677777777777766776677ee8ee54444444555555555854444eeeeeee5558ddd6dd5444445777777777585ddddd585558dddddd585555555
    eeeeeeee77777777777777777777777776777777777777777777777777777777777777777eeee444444445555555555555eeeeeee5555ddd6dd5444455555777755555dd6dd555555dddddd555555555
    677766666666677777777777777677777777777777777777777777777777777777777777777777777777774555555585eeeeeeeee5855dddddd7767777755eeee58555ddddd555444dddddd555555555
    77777777777777777777777777677777777777776777776667777677777777777777777777777777777777774444444555eeeeeee5555ddd6dd7776677777eeee55555ddddd555444dddd6d555555444
    77777777777667777777777766777777777777777777777777777777777777777777777777777777777777777744444455eeeeeee5558ddd6d7767766666777ee55585ddddd5847777ddd6d585444444
    77777777777767777777766677777666776777777777777777766777777777777777777777777777777777777777744445555555e5555dddd67777777777666ee55555dd6dd5547777ddd6d554444444
    77677777677777767677767777776777777666666777777777777777777777777777777777777777777777777777eeeee45555555ee55ddd6677777777777776666775dd6dd5547777ddd6d544444444
    776777776777777767777777777767777767777776667777777777777777777777776777667777777777777777eeeeeeee45555555555dd66777777777777777777667ddddd5447777ddddd444444555
    77667777667777777777777776767777777777777777777766667777777767777777777776677677776677777eeeeeeeeeee4555555556667777777777777777777766dddd44447777ddddd444445555
    7777677777777777777777777777777777777777777777777777677777777677777777777777767777777777eeeee77777777777445557777777777666776777777e766ddd4444777777755477777555
    777767777777777777777777777777777766777777777777777777777777766777777777777776677777777eeee77777777777777777677777777767776666777777756d6d4444777777758577777775
    77766677777766667776777777777777777777777777777777777777777776677777777777777767777eeeee777777777777777777776777777777667777777777777566dd4445577777755577777777
    77777677777777777777777777777777777777777777777777777777777777777777777776777776777ee7777777777777777777777677777776777766777777777777d6ddd585858555858577777777
    7777777777777777777677777777777777777777777777777777777777777777777777777766777777ee7777777777777777777777667777777777777767777777777776655555555555555557777777
    777777777777777777767777777777777766676666666777777777777777777777777777777777777eee7777777777777777777777677777777777777776777777777777658555855585558555857777
    7777777777667777777677777777777777777777777777777777777777777777777777777777777eeeee7777777777777777666776677777777777777777777776777777766655555555555555eeeee5
    777777777776777777777777777777777777777777777777777777777777777777777777777777eeeeee777777777777777777776777777777777777777777767767777777766665858585858eeeeee5
    6777677777776677777777777777777777777777777777777777777777777777777777777777eeeeeeee77777777777777777667677777777777777777777776777677777777777666555555eeeeeee5
    77777777777677677777777777777777777777777777777777777777667777777777777777eeeeeeeeee667777777777777766777777777777777777777777777777667777777777776667eeeeeeee55
    77777777767777766777777777777777777777777776777777777777776667777777777777eeeeeeee7777766667777777667777777777776666777777777777777777667777777777777666eeee5e55
    777777777766777776666666777777777777777777776677777777777777777777777777eeeeeeeeee777777776776667667777777777777776777777777777777777666666777777777777666664e55
    777777777777667777777767666777777777777777777767777777777777777777777eeeeeeeeeee77777777777777777767767777777777767777777777777777777777677667777777777777776755
    77767777777677777777776677766777777777777777777677777777777777777eeeeeeeeeeeee7777777777776667777667667777777777766777777667677766666777766776777777777777777777
    77777777777777677777777777777777777777777777777777777777777777eeeeeeeeeeeee7766666777777667777677777777677776777767777777777777767777777777667677777777777777777
    77777767776777767777777777777766677777777777777777777777777777eeeeeeeeeee777777777666666777766777767776777777767767777777777777766667777777777767777777777777777
    7777776677777777677777767777777766777777777777777777777777777eeeeeeeeee77777777777666777776667777667777777777777677777766677677777777777777777767777777777777777
    77777777777777776777777766667777776677777777777777777777777eeeeeeee776666677777777777777677777766777777777777777677767777777777777777777777667777777777777777777
    77777777777777776677777777777777777666677777777777777777777eee67777777777777777777777776777777777777677777777777777677777777777777777777777777667777777776777777
    7777777777777777777777777777777777777766777777777777777777ee7767777777777777777777777767777777777777677777666677777777777777777777776777777777767767667777777777
    777777777777777777777777766777777777777766777777777777777eee7677777777777777777777776666666677777777766777777777777777777777777777777777777777777766667777777777
    77767777777777777777777777767777667777777677777777777777eeee7777777777777777777777666767777777776777667777777777777777776677777777777777777777777777777777777777
    7777777777777777777777777777777776677777777677777777777eeee77777777777777777777667677777777777767777777777677777777777777766677777777777777777777777777776777777
    777777777777777777777777777777777777777777767777777777eeeee77777777777777777666677777777777777767777777777777777777777777777777777777777777777777777777777777777
    77777777777777777776777777777767777777767777666777777eeeeee77777777777777766677777777777776777776677777777777776677777777777777777777767777777777767777777777767
    7777777777777777777777777777777777777777777776667677eeeeeee77777777777776677777777767666766777776677777777777776777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777766777eeeeeee77777777777666777777777777777667777777777667777777777777777777777777777777777777777777777777777777777
    `)
initializeAnimations()
createPlayer(hero)
levelCount = 8
currentLevel = 0
setLevelTileMap(currentLevel)
giveIntroduction()
// set up hero animations
game.onUpdate(function () {
    if (hero.vx < 0) {
        heroFacingLeft = true
    } else if (hero.vx > 0) {
        heroFacingLeft = false
    }
    if (hero.isHittingTile(CollisionDirection.Top)) {
        hero.vy = 0
    }
    if (controller.down.isPressed()) {
        if (heroFacingLeft) {
            animation.setAction(hero, ActionKind.CrouchLeft)
        } else {
            animation.setAction(hero, ActionKind.CrouchRight)
        }
    } else if (hero.vy < 20 && !(hero.isHittingTile(CollisionDirection.Bottom))) {
        if (heroFacingLeft) {
            animation.setAction(hero, ActionKind.JumpingLeft)
        } else {
            animation.setAction(hero, ActionKind.JumpingRight)
        }
    } else if (hero.vx < 0) {
        animation.setAction(hero, ActionKind.RunningLeft)
    } else if (hero.vx > 0) {
        animation.setAction(hero, ActionKind.RunningRight)
    } else {
        if (heroFacingLeft) {
            animation.setAction(hero, ActionKind.IdleLeft)
        } else {
            animation.setAction(hero, ActionKind.IdleRight)
        }
    }
})
// Flier movement
game.onUpdate(function () {
    for (let value8 of sprites.allOfKind(SpriteKind.Flier)) {
        if (Math.abs(value8.x - hero.x) < 60) {
            if (value8.x - hero.x < -5) {
                value8.vx = 25
            } else if (value8.x - hero.x > 5) {
                value8.vx = -25
            }
            if (value8.y - hero.y < -5) {
                value8.vy = 25
            } else if (value8.y - hero.y > 5) {
                value8.vy = -25
            }
            animation.setAction(value8, ActionKind.Flying)
        } else {
            value8.vy = -20
            value8.vx = 0
            animation.setAction(value8, ActionKind.Idle)
        }
    }
})
// Reset double jump when standing on wall
game.onUpdate(function () {
    if (hero.isHittingTile(CollisionDirection.Bottom)) {
        canDoubleJump = true
    }
})
// bumper movement
game.onUpdate(function () {
    for (let value9 of sprites.allOfKind(SpriteKind.Bumper)) {
        if (value9.isHittingTile(CollisionDirection.Left)) {
            value9.vx = Math.randomRange(30, 60)
        } else if (value9.isHittingTile(CollisionDirection.Right)) {
            value9.vx = Math.randomRange(-60, -30)
        }
    }
})
